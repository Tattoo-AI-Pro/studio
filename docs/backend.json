
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user (matches Firebase Auth UID)."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "photoURL": {
          "type": "string",
          "format": "uri",
          "description": "URL of the user's profile picture."
        }
      },
      "required": ["id", "email"]
    },
    "Serie": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Série",
      "type": "object",
      "description": "Representa uma Série (Coleção ou AI-Book), que é o produto-mãe.",
      "properties": {
        "id": { "type": "string" },
        "capa_url": { "type": "string", "format": "uri" },
        "titulo": { "type": "string" },
        "descricao": { "type": "string" },
        "publico_alvo": { "type": "string" },
        "preco": { "type": "number" },
        "status": { "type": "string", "enum": ["rascunho", "publicada", "pausada"] },
        "data_criacao": { "type": "string", "format": "date-time" },
        "data_atualizacao": { "type": "string", "format": "date-time" },
        "autor_id": { "type": "string" },
        "tags_gerais": { "type": "array", "items": { "type": "string" } },
        "modulos_count": { "type": "integer" },
        "tatuagens_count": { "type": "integer" }
      },
      "required": ["titulo", "status", "autor_id"]
    },
    "Modulo": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Módulo",
      "type": "object",
      "description": "Representa um módulo ou categoria dentro de uma Série.",
      "properties": {
        "id": { "type": "string" },
        "titulo": { "type": "string" },
        "descricao": { "type": "string" },
        "ordem": { "type": "number" },
        "data_criacao": { "type": "string", "format": "date-time" },
        "data_atualizacao": { "type": "string", "format": "date-time" },
        "tatuagens_count": { "type": "integer" }
      },
      "required": ["titulo", "ordem"]
    },
    "Tatuagem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tatuagem",
      "type": "object",
      "description": "Representa uma tatuagem individual, o coração do AI-Book.",
      "properties": {
        "id": { "type": "string" },
        "capa_url": { "type": "string", "format": "uri" },
        "titulo": { "type": "string" },
        "descricao_contextual": { "type": "string" },
        "tema": { "type": "string" },
        "estilos": { "type": "array", "items": { "type": "string" } },
        "significado_literal": { "type": "string" },
        "significado_subjetivo": { "type": "string" },
        "cores_usadas": { "type": "array", "items": { "type": "string" } },
        "elementos_presentes": { "type": "array", "items": { "type": "string" } },
        "tom_emocional": { "type": "string" },
        "local_sugerido": { "type": "string" },
        "simbolismo": { "type": "string" },
        "referencia_cultural": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "likes": { "type": "integer" },
        "comentarios_count": { "type": "integer" },
        "compartilhamentos": { "type": "integer" },
        "data_criacao": { "type": "string", "format": "date-time" },
        "data_atualizacao": { "type": "string", "format": "date-time" },
        "autor_id": { "type": "string" },
        "origem": { "type": "string", "enum": ["manual", "IA"] }
      },
      "required": ["capa_url", "titulo", "autor_id", "origem"]
    },
    "Like": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Like",
      "type": "object",
      "description": "Representa a curtida de um usuário em uma tatuagem.",
      "properties": {
        "userId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "timestamp"]
    },
    "Comentario": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Comentário",
      "type": "object",
      "description": "Representa um comentário de um usuário em uma tatuagem.",
      "properties": {
        "id": { "type": "string" },
        "user_id": { "type": "string" },
        "texto": { "type": "string" },
        "data_criacao": { "type": "string", "format": "date-time" }
      },
      "required": ["user_id", "texto", "data_criacao"]
    }
  },
  "auth": {
    "providers": ["google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public user profile information."
    },
    "/series/{serieId}": {
      "schema": { "$ref": "#/entities/Serie" },
      "description": "Coleção principal para as Séries (AI-Books).",
      "subcollections": {
        "/modulos/{moduloId}": {
          "schema": { "$ref": "#/entities/Modulo" },
          "description": "Subcoleção para os módulos dentro de uma Série.",
          "subcollections": {
            "/tatuagens/{tatuagemId}": {
              "schema": { "$ref": "#/entities/Tatuagem" },
              "description": "Subcoleção para as tatuagens dentro de um módulo.",
              "subcollections": {
                "/likes/{userId}": {
                  "schema": { "$ref": "#/entities/Like" },
                  "description": "Usuários que curtiram a tatuagem."
                },
                "/comentarios/{commentId}": {
                  "schema": { "$ref": "#/entities/Comentario" },
                  "description": "Comentários na tatuagem."
                }
              }
            }
          }
        }
      }
    }
  }
}
